#FR-001
> Как бизнес пользователь приложения, хочу выбирать поставщика как из общего перечня, так и из списка "избранных" (ранее активных) поставщиков для товара/склада. Это позволит быстрее переназначать поставщика и как результат упростит работу с системой.

##Цель FR:
### Находясь в __SKU Card__(SKU data) пользовательно должен иметь возможность:
- добавть/изменить основного поставщика для SKU/WH,
- просматривать "историю" изменения поставщиков (включая особые параметры товара), 
- _поиск/фильтр альтернативных поставщиков_

##Дизайн диалогового окна:
As is:

[Screen As-is, link](http://cs628027.vk.me/v628027613/ef7f/Je7DPEOZ5wI.jpg)

To be:

![Mockup To-be](http://cs628027.vk.me/v628027613/f0fb/He0BBnkL9sU.jpg)

### Описание полей
|Field, #| Type |avalability|value, en|value, ua|value, ru|
|---|---|---|---|---|---|
|1|lable| r/o| "SKU"| Код товару | Код товара|
|2|lable| r/o| "Supplier" |Постачальник |Поставщик|
|3|lable| r/o| =SKU.Code |
|4|dropdown| |
|5|button|r/o| 
|6|button|r/o| 
|7|table|r/o| 
|8|radio button|r/o| 
|9|lable|r/o| 
|10|lable|r/o| 
|11|lable|r/o|
|12|dropdown|r/o|
|13|spiner|r/o|
|14|lable|r/o|
|15|line|r/o|
|16|button|r/o|

##Решение на уровне БД:
Сохранять в отдельной Таблице _(далее по тексту, ~~RecentSupplier~~ RSTable)_ "историю" поставщиков.

###Поля таблицы:
- SKU {Product_id} 
- Warehouse {Warehouse_id} 
- SupplierCode {Supplier_id} 

Т.е. Supplier_id для SKU+Warehouse. 

А также, возможно:
- Main {true,false} - флаг, Поставщик активный/неактивный, а можно брать в таблице __skubody__
- Date_end - дата, когда Поставщик перестал быть Активным.

##Примечание:
Поставщик может быть отредактирован путем

1. Импорта из *.csv (плановый/внеплановый)
2. Выгрузки *.xls
3. Редактирования через интерфейс приложения

##Логика:

![Flowchart](http://cs628027.vk.me/v628027613/ef78/zdonxufKPmQ.jpg)

1. Сравнить "новых" Поставщиков c данными из Таблицы. 
<br>Искать среди активных (флаг Main=1) по уникальному ключу SKU & Warehouse. _(это ускорит поиск благодаря снижению количества проверок)_.
Если все ровно -> Конец
2. Если появился новый Main поставщик для SKU & Warehouse _(для уникального ключа SKU & Warehouse)_:
2.1. Поставщик есть среди неактивных (Main=0) -> меняем флаг активности Main=1, обновляем дату (Date_beg=TODAY)
2.2. Поставщик отсутствует с таблице RecentSupplier  -> добавляем новую запись в Таблицу. Задаем "новичку" флаг Main=1 _(это может быть значением по умолчанию для всех новых Поставщиков)_ и проставляем дату Date_beg=TODAY.

3. Старому (предыдущему) Поставщику изменить статус (флаг Main=0)
